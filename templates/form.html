
<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cadastro Minist√©rio de Louvor</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<style>
  html {
    box-sizing: border-box;
}
*, *:before, *:after {
    box-sizing: inherit;
}

  .logo-peniel {
  width: 120px;
  margin-bottom: 10px;
  transition: filter 0.3s ease;
}
  body {
    font-family: Arial, sans-serif;
    background: #f8f9fa;
    margin: 0;
    padding: 0px;
  }
  .container {
    max-width: 1000px;
    margin: auto;
    padding-bottom: 80px; /* Espa√ßo entre bot√£o e rodap√© */
  }
  .card {
    background: white;
    border-radius: 10px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    padding: 20px;
    margin-bottom: 20px;
  }
  .card h2 {
    font-size: 20px;
    margin-bottom: 15px;
    color: #333;
  }
  .linha {
    display: flex;
    gap: 10px;
  }
  .linha > div {
    flex: 1;
  }
  label {
    display: block;
    margin-top: 15px;
    font-weight: bold;
    color: #555;
  }
  input[type="text"], input[type="email"], input[type="date"], textarea, select {
    width: 100%;
    padding: 10px;
    margin-top: 5px;
    border: 1px solid #ccc;
    border-radius: 5px;
    box-sizing: border-box;
    transition: background-color 0.3s;
  }
  input[type="text"]:focus, input[type="email"]:focus, input[type="date"]:focus, textarea:focus, select:focus {
    background-color: #f2fbf2; /* Verde clar√≠ssimo no campo focado */
    outline: none;
  }
  .submit-btn {
    text-align: center;
    margin-top: 30px;
  }
  .submit-btn button {
    background-color: #4CAF50;
    color: white;
    padding: 12px 24px;
    border: none;
    border-radius: 5px;
    font-size: 16px;
    cursor: pointer;
  }
  .submit-btn button:hover {
    background-color: #45a049;
  }
.icon-btn {
  background-color: #28a745;
  border: none;
  color: white;
  padding: 8px 10px;
  border-radius: 5px;
  cursor: pointer;
  font-size: 16px;
}

.icon-btn:hover {
  background-color: #218838;
}


 /* Modo escuro */
        .dark-mode { background-color: #2a2a2a; color: white; }
        .dark-mode .card { background: #1e1e1e; color: white; box-shadow: 0 0 10px rgba(255,255,255,0.1); }
        .dark-mode .top-bar { background-color: #2e413a; }

                /* Modo escuro para tabela */
        .dark-mode table {
            background-color: #1e1e1e;
            color: #ffffff;
        }

        .dark-mode th {
            background-color: #3a3a3a;
            color: #ffffff;
        }

        .dark-mode td {
            border-color: #555;
        }

        .dark-mode tr:nth-child(even) {
            background-color: #2d2d2d;
        }

        .dark-mode tr:nth-child(odd) {
            background-color: #1e1e1e;
        }

        .dark-mode tr:hover {
            background-color: #444 !important;
        }

        .dark-mode input[type="text"],
        .dark-mode input[type="email"],
        .dark-mode input[type="date"],
        .dark-mode textarea,
        .dark-mode input[type="password"],
        .dark-mode select {
         background-color: #2d2d2d;
          color: #bebebe;
          border: 1px solid #555;
        }
        .dark-mode label,
        .dark-mode h3,
        .dark-mode h4,
        .dark-mode h2,
        .dark-mode h1,
        .dark-mode p {
            color: #bdbdbd !important;
        }

        .dark-mode input::placeholder,
        .dark-mode textarea::placeholder {
          color: #aaa;
        }
        .dark-mode .login-container {
          background-color: #1e1e1e;
          box-shadow: 0 0 10px rgba(255,255,255,0.1);
        }
        .dark-mode .logo-peniel {
          filter: invert(1) brightness(1.2);
        }
        .dark-mode input[type="text"]:focus,
        .dark-mode input[type="email"]:focus,
        .dark-mode input[type="date"]:focus,
        .dark-mode textarea:focus,
        .dark-mode select:focus {
        background-color: #686868;
        outline: none;
        }
        .dark-mode footer.footer {
          background-color: #1f2f28;
          border-top: 1px solid #444;
          color: #bdbdbd;
        }

        .dark-mode footer.footer .versao {
           color: #aaa;
        }

  
.top-bar {
  background-color: #d4edda;
  padding: 10px 20px;
  position: sticky;
  top: 0;
  left: 0;
  right: 0;
  display: flex;
  justify-content: flex-end;
  align-items: center;
  z-index: 1000;
  box-shadow: 0px 2px 5px rgba(0,0,0,0.1);
  width: 100%;       /* Garante que a barra ocupe 100% da largura */
  margin: 0;        /* Remove qualquer margem interna da top-bar */
}
.top-bar .buttons {
  display: flex;
  gap: 10px;
  margin: 0;  /* Garanta que n√£o h√° margens */
  padding: 0; /* Garanta que n√£o h√° padding */
}
.top-bar button {
  background-color: #28a745;
  color: white;
  border: none;
  padding: 8px 12px;
  border-radius: 5px;
  cursor: pointer;
  font-weight: bold;
}
.top-bar button:hover {
  background-color: #218838;
}
.modal {
  display: none;
  position: fixed;
  z-index: 9999;
  left: 0; top: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0,0,0,0.7);
  align-items: center;
  justify-content: center;
}

.modal-content {
  background-color: white;
  padding: 30px;
  border-radius: 10px;
  text-align: center;
  max-width: 400px;
  box-shadow: 0 0 10px black;
}

.dark-mode .modal-content {
  background-color: #1e1e1e;
  color: white;
}

.modal-content button {
  margin-top: 20px;
  padding: 10px 20px;
  background-color: #28a745;
  color: white;
  border: none;
  border-radius: 5px;
  cursor: pointer;
}


</style>

<!-- M√°scara e Scripts -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"></script>
<script>
$(document).ready(function(){
  $('#telefone').mask('(00) 0 0000-0000');
});

function validarEmail(input) {
  const email = input.value;
  if (email && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
    alert('Por favor, insira um email v√°lido.');
    input.value = '';
    input.focus();
  }
}

function mostrarOutroInstrumento() {
  var instrumentoSelect = document.getElementById('instrumentos');
  var outroInput = document.getElementById('outro_instrumento');
  if (instrumentoSelect && instrumentoSelect.value === 'Outro') {
    outroInput.style.display = 'block';
  } else {
    outroInput.style.display = 'none';
  }
}

function atualizarPerfil() {
  var perfil = document.getElementById('perfil').value;
  var blocoVoz = document.getElementById('bloco-voz');
  var blocoInstrumento = document.getElementById('bloco-instrumento');

  if (perfil === "Cantor(a)") {
    blocoVoz.style.display = "block";
    blocoInstrumento.style.display = "none";
  } else if (perfil === "Instrumentista") {
    blocoVoz.style.display = "none";
    blocoInstrumento.style.display = "block";
  } else if (perfil === "Ambos") {
    blocoVoz.style.display = "block";
    blocoInstrumento.style.display = "block";
  } else {
    blocoVoz.style.display = "none";
    blocoInstrumento.style.display = "none";
  }
}

function toggleDarkMode() {
    document.body.classList.toggle('dark-mode');
}
</script>
</head>
<body>
<div id="modal-fechado" class="modal">
  <div class="modal-content">
    <div style="font-size: 50px; margin-bottom: 10px;">‚ö†Ô∏è</div>
    <h2>INSCRI√áOES FECHADAS</h2>
    <p>O per√≠odo de inscri√ß√µes est√° fechado no momento.</p>
    <h6>Procure o lider do ministerio para mais informa√ß√µes.</h6>
    <button onclick="history.back()">Voltar</button>
  </div>
</div>

<div class="top-bar">
  <div class="buttons">
    <button onclick="toggleDarkMode()"><i class="fas fa-moon"></i></button>
  </div>
</div>
<div class="container">

<div class="logo-container" style="text-align: center; margin-bottom: 20px;">
  <img src="{{ url_for('static', filename='peniel-removebg-preview.png') }}" alt="Logo Peniel" class="logo-peniel">
  <h1 style="margin: 0;">PENIEL GUILHERMINA</h1>
  <h2 style="margin-top: 5px;">Cadastro para o Minist√©rio de Louvor</h2>
</div>

<form method="POST">
<input type="hidden" name="id" id="id">
<div class="card">
  <h2>üë§ Dados Pessoais</h2>
  <label>Nome Completo:</label>
  <input type="text" name="nome" id="nome" required>

  <label>Data de Nascimento:</label>
  <input type="date" name="nascimento" id="nascimento" required>

  <label>Telefone (WhatsApp):</label>
  <input type="text" id="telefone" name="telefone" inputmode="numeric" required>

  <label>Email:</label>
  <input type="email" name="email" onchange="validarEmail(this)" required>

  <div class="linha">
    <div>
      <label>Rua/Avenida:</label>
      <input type="text" name="endereco" required>
    </div>
    <div>
      <label>N√∫mero:</label>
      <input type="text" name="numero" inputmode="numeric" required>
    </div>
    <div>
      <label>Complemento:</label>
      <input type="text" name="complemento">
    </div>
  </div>

  <div class="linha">
    <div>
      <label>Bairro:</label>
      <input type="text" name="bairro" required>
    </div>
    <div>
      <label>Cidade:</label>
      <input type="text" name="cidade" required>
    </div>
    <div>
      <label>Estado:</label>
      <select name="estado" required>
        <option value="">Selecione</option>
        <option value="SP">SP</option>
        <option value="RJ">RJ</option>
        <option value="MG">MG</option>
        <option value="RS">RS</option>
        <option value="PR">PR</option>
        <option value="SC">SC</option>
      </select>
    </div>
  </div>

  <label>Profiss√£o:</label>
  <input type="text" name="profissao">

  <label>Estado Civil:</label>
  <select name="estado_civil" required>
    <option value="">Selecione</option>
    <option value="Solteiro(a)">Solteiro(a)</option>
    <option value="Casado(a)">Casado(a)</option>
    <option value="Divorciado(a)">Divorciado(a)</option>
    <option value="Viuvo(a)">Viuvo(a)</option>
  </select>

  <label>√â Batizado nas √Åguas?</label>
  <select name="batizado" required>
    <option value="">Selecione</option>
    <option value="Sim">Sim</option>
    <option value="N√£o">N√£o</option>
  </select>
</div>

<div class="card">
  <h2>üéµ Perfil Ministerial</h2>

  <label>Perfil:</label>
  <select name="perfil" id="perfil" onchange="atualizarPerfil()" required>
    <option value="">Selecione</option>
    <option value="Cantor(a)">Cantor(a)</option>
    <option value="Instrumentista">Instrumentista</option>
    <option value="Ambos">Ambos</option>
  </select>

  <div id="bloco-voz" style="display:none;">
    <label>Classifica√ß√£o Vocal:</label>
    <select name="voz">
      <option value="">Selecione</option>
      <option value="Soprano">Soprano</option>
      <option value="Contralto">Contralto</option>
      <option value="Tenor">Tenor</option>
      <option value="Baixo">Baixo</option>
      <option value="Bar√≠tono">Bar√≠tono</option>
      <option value="N√£o sei">N√£o sei</option>
    </select>

    <label>Faz aulas de canto?</label>
    <select name="aulas">
      <option value="">Selecione</option>
      <option value="Sim">Sim</option>
      <option value="N√£o">N√£o</option>
      <option value="J√° fiz">J√° fiz</option>
    </select>

    <label>Tem facilidade para cantar em segunda voz?</label>
    <select name="segunda_voz">
      <option value="">Selecione</option>
      <option value="Sim">Sim</option>
      <option value="N√£o">N√£o</option>
      <option value="Estou aprendendo">Estou aprendendo</option>
    </select>
  </div>

  <div id="bloco-instrumento" style="display:none;">
    <label>Instrumento que toca:</label>
    <select name="instrumentos" id="instrumentos" onchange="mostrarOutroInstrumento()">
      <option value="">Selecione</option>
      <option value="Viol√£o">Viol√£o</option>
      <option value="Guitarra">Guitarra</option>
      <option value="Baixo">Baixo</option>
      <option value="Teclado">Teclado</option>
      <option value="Bateria">Bateria</option>
      <option value="Outro">Outro</option>
    </select>
    <input type="text" name="outro_instrumento" id="outro_instrumento" placeholder="Digite o instrumento" style="display:none; margin-top:10px;">

    <label>Sabe ler cifras?</label>
    <select name="cifras">
      <option value="">Selecione</option>
      <option value="Sim">Sim</option>
      <option value="N√£o">N√£o</option>
    </select>

    <label>Consegue tirar m√∫sicas de ouvido?</label>
    <select name="ouvido">
      <option value="">Selecione</option>
      <option value="Sim">Sim</option>
      <option value="N√£o">N√£o</option>
    </select>

    <label>N√≠vel T√©cnico:</label>
    <select name="nivel_tecnico">
      <option value="">Selecione</option>
      <option value="Iniciante">Iniciante</option>
      <option value="Intermedi√°rio">Intermedi√°rio</option>
      <option value="Avan√ßado">Avan√ßado</option>
    </select>
  </div>
</div>

<div class="card">
  <h2>üìÖ Disponibilidade</h2>
  <label>Dispon√≠vel para ensaios semanais?</label>
  <select name="ensaios" required>
    <option value="">Selecione</option>
    <option value="Sim">Sim</option>
    <option value="N√£o">N√£o</option>
    <option value="A combinar">A combinar</option>
  </select>

  <label>Dispon√≠vel para cultos?</label>
  <select name="cultos" required>
    <option value="">Selecione</option>
    <option value="Sim">Sim</option>
    <option value="N√£o">N√£o</option>
    <option value="Parcial">Parcial</option>
  </select>
</div>

<div class="card">
  <h2>üìù Motiva√ß√£o e Experi√™ncia</h2>
  <label>Por que deseja participar do Minist√©rio de Louvor?</label>
  <textarea name="motivacao" rows="5" placeholder="Se voc√™ j√° faz parte do Minist√©rio de Louvor da Peniel Guilhermina N√ÉO √â NECESSARIO O PREENCHIMENTO DESSE CAMPO."></textarea>

  <label>Tem experi√™ncia com MULTITRACK e CLICK?</label>
  <textarea name="experiencia" rows="8" placeholder="Nos conte tamb√©m sobre como e quando voc√™ come√ßou na area da m√∫sica, se ja participou em outros Ministerios ou Bandas."></textarea>
</div>

<div class="submit-btn">
  <button type="submit" id="botao_enviar">Enviar Cadastro</button>
</div>

</form>
</div>
<script>
function toggleDarkMode() {
    const isDark = document.body.classList.toggle('dark-mode');
    localStorage.setItem('modoEscuro', isDark ? 'ativado' : 'desativado');
}

// Aplica o modo escuro automaticamente se estiver ativado
window.onload = function () {
    if (localStorage.getItem('modoEscuro') === 'ativado') {
        document.body.classList.add('dark-mode');
    }
}

document.addEventListener('DOMContentLoaded', function() {
    const nomeInput = document.getElementById('nome');
    const nascimentoInput = document.getElementById('nascimento');

    function verificarCadastro() {
        const nome = nomeInput.value.trim();
        const nascimento = nascimentoInput.value.trim();

        if (nome && nascimento) {
            fetch('/verificar_cadastro', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({nome: nome, nascimento: nascimento})
            })
            .then(response => response.json())
            .then(data => {
                if (data.existe) {
                    document.getElementById('id').value = data.dados.id;
                    const confirmar = confirm(`Ol√° ${data.dados.nome}, seu cadastro foi encontrado em nossa base. Deseja fazer altera√ß√µes?`);
                    if (confirmar) {
                        for (const campo in data.dados) {
                            const elemento = document.getElementsByName(campo)[0];
                            if (elemento) {
                              const tipo = elemento.tagName.toLowerCase();

                              if (tipo === "select") {
                                  if (campo === "estado") {
                                      const valorBanco = (data.dados[campo] || "").toUpperCase();
                                      const opcoes = Array.from(elemento.options);
                                      const opcaoCorreta = opcoes.find(o => o.value.toUpperCase() === valorBanco);
                                      if (opcaoCorreta) {
                                          elemento.value = opcaoCorreta.value;
                                      } else {
                                          elemento.value = data.dados[campo];
                                      }
                                  } else {
                                      elemento.value = data.dados[campo];
                                  }
                              } else if (tipo === "input" || tipo === "textarea") {
                                  elemento.value = data.dados[campo];
                              }


                            }
                        }
                        const botao = document.getElementById('botao_enviar');
                        if (botao) {
                            botao.textContent = 'ATUALIZAR CADASTRO';
                        }
                    } else {
                        window.location.href = `/cadastro_existente?nome=${encodeURIComponent(data.dados.nome)}`;
                    }
                }
            });
        }
    }

    nomeInput.addEventListener('blur', verificarCadastro);
    nascimentoInput.addEventListener('blur', verificarCadastro);
});
 window.onload = function () {
    {% if mostrar_modal %}
    document.getElementById("modal-fechado").style.display = "flex";
    {% endif %}
  }
</script>

{% include 'footer.html' %}


</body>
</html>
